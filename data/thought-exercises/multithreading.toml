[category]
  id = 2
  title = "Многопоточность"

[[exercises]]
  id = 1
  exercise = "Переменную count хочешь быстро заинкрементировать до 10 тыс. В цикле запустил 10 тыс. потоков, которые инкрементят счетчик. Решил сделать синхронизацию. Какой способ выбрать: synchronized или atomic? Почему?"

[[exercises]]
  id = 2
  exercise = "Как сделать так, если 10 потоков вызывают get() одновременно, ты не создал 10 объектов Singletone?"

[[exercises]]
  id = 3
  exercise = "Может ли быть, что разные потоки всегда видят актуальное значение переменной, хотя она НЕ помечена volatile?"

[[exercises]]
  id = 4
  exercise = "Есть статичный метод, в его сигнатуре пишу synchronized. На чем будет происходить синхронизация?"

[[exercises]]
  id = 5
  exercise = "Есть объект, внутри синхронизированный метод, к которому могут обратиться несколько потоков. Предположите, когда синхронизированный метод не сработает и получим коллизию?"

[[exercises]]
  id = 6
  exercise = "Пишем генерацию отчета. Мне надо сходить в 4 системы по HTTP и получить данные. Хотим ускорить с помощью многопоточки. Как сделать?"

[[exercises]]
  id = 7
  exercise = "Есть 5 разных потоков. Есть метод объекта, который потоки хотят плюс-минус одновременно дернуть, но нужно, чтобы дернул только один. Что делать в первую очередь"

[[exercises]]
  id = 8
  exercise = "На atomic переменной сделали счетчик. Изначально значение переменной 0. Два потока прибавляют 1 одновременно."

[[exercises]]
  id = 9
  exercise = "Есть несколько потоков, мы хотим, чтобы они все стартанули одновременно. Как это сделать средствами Java?"

[[exercises]]
  id = 10
  exercise = "В коде нужно сделать паузу. Нельзя использовать классические способы Thread sleep, wait. Как нам реализовать паузу?"

[[exercises]]
  id = 11
  exercise = "Нужно сделать систему мониторов, мьютексов, чтобы таски выполнять согласованно. Какой concurrency интерфейс использовать? Методы, классы, интерфейсы, которые предоставляют механизмы блокировок?"

[[exercises]]
  id = 12
  exercise = "Есть счетчик. Запустили 100 потоков. По итогу у нас будет значение 100?"

[[exercises]]
  id = 13
  exercise = "В одном потоке перебирается коллекция, а в другом потоке из коллекции что-то удаляется. Что делать, чтобы не было ошибки?"

[[exercises]]
  id = 14
  exercise = "У хэшмап планируем использовать в качестве некого счетчика для действий пользователя. В качестве ключа у нас пользователь, в качестве значения счетчик. Происходит какое-то событие, мы берем пользователя, добавляем в счетчик плюс один. Таким образом у нас растет событие. Вопрос. Будет ли корректно такая мапа работать в многопоточке?"

[[exercises]]
  id = 15
  exercise = "Если создать 100 потоков программа будет выполняться быстрее? Поток идет в центробанк запрашивает валюту и заносит в таблицу. Миллион значений. Если создать 5 потоков и 100 потоков. Что быстрее выполнится?"

[[exercises]]
  id = 16
  exercise = "Создание потока дорогая операция. Как нам помогает ExecutorService?"

[[exercises]]
  id = 17
  exercise = "У многопоточки есть 3 параметра. atomicity, visibility, happens-before. Что из этого нам обеспечивает переменная volatile"

[[exercises]]
  id = 18
  exercise = "Предположим поток ничего не выделяет из памяти. Вообще не обращается к Хипу. Этот поток может жить без Стека?"

[[exercises]]
  id = 19
  exercise = "Поток который обрабатывает очень большой объекм данных. Поток обращается к данным. Все данные будут закешированы к кеше этого потока?"

[[exercises]]
  id = 20
  exercise = "Когда присваиваете значение в переменную это атомарное действие?"

[[exercises]]
  id = 21
  exercise = "Если два потока хотят синхронизироваться, какой объект они могут использовать в качестве монитора?"

[[exercises]]
  id = 22
  exercise = "Если 10 потоков, которые пришли в synchronize, кто из них первый  попадет в Lock"

[[exercises]]
  id = 23
  exercise = "Есть потоки. Вы стартуете на каждую задачу либо сделали threadPool или Executor. У вас ограниченное количество потоков. С точки зрения вычислений это более эффективно или просто удобно?"

[[exercises]]
  id = 24
  exercise = "Как написать асинхронное приложение. Как одновременно запустить две функции и дождаться их выполнения. Например есть getTotalPrice и getBonusRubbles. Надо вычесть их в конце. Как это сделать?"

[[exercises]]
  id = 25
  exercise = "В чем отличие несинхронной обработки запроса и неблокирующей реактивной обработки?"

[[exercises]]
  id = 26
  exercise = "Почему в многопоточной среде выполнения из коллекции ArrayList может выброситься ConcurrentModificationException. Как это пофиксить?"

[[exercises]]
  id = 27
  exercise = "Если создали в main новый поток и запустили, какой приоритет будет у потока?"

[[exercises]]
  id = 28
  exercise = "Пишу код, хочу использовать чужой класс. Мой участок кода будет исполняться многопоточно. Как понять, что чужой класс будет нормально работать в многопоточной среде? Чужой класс - это Registry, там обычная HashMap, в которую что-то складываем, потом что-то достаем"

[[exercises]]
  id = 29
  exercise = "Хотим вызвать три метода в параллель, объединить результаты которые они выдадут и вызвать из своего метода? Каждый из методов возвращает Set."

[[exercises]]
  id = 30
  exercise = "Создаем на Spring Initializer простое Spring Boot приложение, добавив в него всего один компонент Web. И создадим один контроллер, в рамках которого создадим один метод. Это приложение будет однопоточным или многопоточным?"

[[exercises]]
  id = 31
  exercise = "Как считаете, это безопасно с точки зрения потоков, что дефолтный скоуп Singleton, а кругом многопоточка?"

[[exercises]]
  id = 32
  exercise = "Как блокировать поток в многопоточной среде"

[[exercises]]
  id = 33
  exercise = "Хотим вызавать три метода в параллель, объединить результаты и вернуть из своего метода. Как такое реализовать?"

[[exercises]]
  id = 34
  exercise = "Есть класс Thread, в нем есть статический метод sleep(). В Sleep можем передать временное значение. У каждого объекта в Java есть метод wait(). Чем отличаются эти два метода?"

[[exercises]]
  id = 35
  exercise = "Когда выполняли notifyAll и все потоки пробудились, какой поток будет выполняться?"

[[exercises]]
  id = 36
  exercise = "Как проверить, что именно 20 потоков прошло через блок кода?"

[[exercises]]
  id = 37
  exercise = "Есть класс Desk. Есть якобы AI и пользователь работают параллельно, а IndianAI игрок сидит из Индии и по TCP/IP общается с программой. Как бы реализовал многопоточку в этом случае?"

[[exercises]]
  id = 38
  exercise = "Есть метод помеченный synchronized. И есть другой метод в том же классе, в котором критическая секция помечена через Lock объект. Что является монитором в данном случае? Относительно чего синхронизируются?"

[[exercises]]
  id = 39
  exercise = "Если я напишу volatile в многопоточном инкременте обычного int, будет ли корректно считаться инкремент?"

[[exercises]]
  id = 40
  exercise = "Если указали synchronized в сигнатуре метода, то кто будет там монитором?"

[[exercises]]
  id = 41
  exercise = "Запустил CompletableFuture на 10 задач. И запустил Executor на 10 потоков. В чем разница?"

[[exercises]]
  id = 42
  exercise = "Есть сервис. На вход ему посылаем потоки. Один сделан на синхронном потоке, другой на асинхронном. У каждого под капотом пул из 10 потоков. Ядер у процессора 10. Каждый запрос выполняется 3 мин. Кинул первый, второй, ..., десятый запрос, потом одиннадцатый запрос кидаю, а под капотом всего 10 потоков. Что произойдет с одиннадцатым запросом, если первые десять запросов еще не исполнились?"

[[exercises]]
  id = 43
  exercise = "Есть глобально доступный счетчик public static int count = 0. Есть два потока. Каждый поток в цикле из 100 итераций делает инкремент на 1 счетчика count. Потоки запускаются одновременно. Мы дожидаемся их выполнения. Что мы увидим в счетчике count после их отработки?"

[[exercises]]
  id = 44
  exercise = "Есть 1000 клиентов. Нужно каждый час проходить и выполнять какую-то работу. Есть вариант распараллелить?"

[[exercises]]
  id = 45
  exercise = "У Вас есть два потока, которые считывают данные из заказа. Один поток не справлялся и Вы решили подключить второй. Может получиться, что Вы заказ считали, а он в БД не вставляется. Например, товар еще не подгрузился. Надо к этому заказу потом вернуться, а у Вас два потока работают, нужно как-то переставлять смещение, что считали, а что нет. Как бы Вы это решили?"

[[exercises]]
  id = 46
  exercise = "Есть базовый трехзвенный сервис: получить пользователей, в БД все идет. Через RestController идет. Жирный pod на 20 потоков вызывает одни и те же методы, использует одни и те же классы. И в многопоточной среде все отлично работает. Мы не ставим блокировки, не используем многопоточные коллекции. Почему?"

[[exercises]]
  id = 47
  exercise = "Как думаешь, будут ли проблемы с многопоточностью, если мы поменяем скоуп бина? Если поставим Prototype или Web Request?"

[[exercises]]
  id = 48
  exercise = "Часто бывает, что из БД вычитал набор тасков, они обрабатываются долго, надо это сделать параллельно. Как обычно такое решаешь?"

[[exercises]]
  id = 49
  exercise = "Ты пишешь приложение, в котором используется CompletableFuture, которую ты запускаешь и пытаешься прочитать что-то из SecurityContext и как-то обработать. Что будет происходить?"

[[exercises]]
  id = 50
  exercise = "Многопоточка, CompletableFuture. Есть наш метод, он выполняет какую-то логику. Мы можем вносить изменения в его реализацию. Главный нюанс: если в метод закинуть много данных, то для обработки он будет потреблять много ресурсов и очень долго выполняться. Мы хотим начать вызывать его в отдельном потоке. Но с нюансом: если за 5 сек ответ, мы больше не хотим ждать его выполнения и больше не хотим потреблять ресурсы на его выполнение. Что нужно сделать?"

[[exercises]]
  id = 51
  exercise = "Есть 3 потока, каждый что-то делает и мы сделали счетчик количества операций. В каждом потоке мы хотим этот счетчик инкрементировать. Как это сделать потокобезопасно?"

[[exercises]]
  id = 52
  exercise = "Если через семафор: пришел поток, захватил семафор, остальные потоки сидят-курят, в ожидании, когда освободится. То есть в момент инкрементации все потоки стоят, ничего не делают, пока один не сделает. Как бы ты реализовал в таком случае?"

[[exercises]]
  id = 53
  exercise = "У нас есть два потока - A и B. В какой-то момент из потока А в поток В каким-то образом нужно передать информацию, что мы заняли ресурс. Как это сделать?"

[[exercises]]
  id = 54
  exercise = "У нас есть два потока, они не завершились и что-то делают. Допустим, первый поток ждет второго. Как из второго потока прокинуть в первый сообщение, чтобы его оживить?"

[[exercises]]
  id = 55
  exercise = "А если мы хотим ограничить метод несколькими потоками? Например, у нас есть крупный метод, который работает с большой локальной мапой. Нужно, чтобы с ним работало максимум три потока, больше нельзя. Как это реализовать?"

[[exercises]]
  id = 56
  exercise = "Соотношение Happens-before. Если мы что-то записали в волатайл переменную, а в другом потоке считали измененное значение, то...? Что будет?"

[[exercises]]
  id = 57
  exercise = "Когда мы используем ComplitableFuture у нас подается асинхронная задача. Асинхронная задача должна где-то выполняться. Где выполняется асинхронная задача?"

[[exercises]]
  id = 58
  exercise = "Два потока зашли в один метод, при этом в методе не рассчитано, что с ним будут работать параллельно два потока. Что мы получим на выходе?"

[[exercises]]
  id = 59
  exercise = "Из-за synchronized мы лишаемся преимуществ многопоточности: потоки стоят в очереди. Как можно решить эту проблему?"

[[exercises]]
  id = 60
  exercise = "Пусть ExecutorService создал потоки, мы из пула взяли поток, он выполнил свою задачу. Что с ним дальше происходит?"

[[exercises]]
  id = 61
  exercise = "Мы хотим написать самопальный кеш. Не использую готовые решения. Что будем использовать?"

[[exercises]]
  id = 62
  exercise = "Взяли кеш и выяснили, что общий кеш нам не нужен. Нам нужен для каждого нового вызова сервиса нам нужно создавать кеш. Что будем делать? У нас есть вызов сервиса. 16 потоков, мы 16 раз вызвали сервис. Для каждого единичного вызова сервиса, нужно сделать так, чтобы создавался новый кеш"

[[exercises]]
  id = 63
  exercise = "Есть сервис отправки пушей для клиентов в телефон. Пуши отправляете пакетами по 200 номеров. Хотите чтобы пакеты отправлялись параллельно. Как бы вы это сделали через Compatible Future?"

[[exercises]]
  id = 64
  exercise = "Как обрабатывать ошибки в Compatible Future? У вас какие то элементы отправились, а какие то  ошбику сделали. N потоков отправки. Какие то успешно, какие то нет. Надо разобраться, какие в этих потоках сообщения отправились, а какие нет. Те которые не отправились, отправить повторно"

[[exercises]]
  id = 65
  exercise = "Есть main. В нем мы создаем новый поток, в котором просто в цикле со слипом выводим лог. Есть дочерний поток. Если main процесс завершится, закроется ли дочерний поток?"

[[exercises]]
  id = 66
  exercise = "Есть файл, в нем хранятся key-value. Этот словарь в файле неизменен, мы его включили в сборку. Нам нужно этот словарь отдавать потребителям. Как это лучше имплементировать? Чтобы поддерживать многопоточное чтение. Надо отдавать записи по ключу из него. В каких структурах бы хранил? Сделал бы блокировки?"

[[exercises]]
  id = 67
  exercise = "Есть HashMap, объявил ее volatile. Я делаю put в нее. Потом следующий поток. Это будет атомарное изменение? Поможет ли volatile в данном случае?"

[[exercises]]
  id = 68
  exercise = "Есть мой кастомный поток, connection. Что нужно сделать, чтобы поместить его в try-with-resources?"

[[exercises]]
  id = 69
  exercise = "Есть проблема в том, что параллельный стрим берет потоки из пула, которым пользуется весь application?"

[[exercises]]
  id = 70
  exercise = "Что случится если параллельный стрим возьмет все потоки из пула?"

[[exercises]]
  id = 71
  exercise = "Работаю на одноядерном процессоре. Создавать больше одного потока не имеет смысла? Можно ли создать больше одного потока?"

[[exercises]]
  id = 72
  exercise = "У нас большая система. В процессе работы запустился поток и в нем произошел exception. Где мы увидем его? В логах или не увидем? В методе run, try и catch нету."

[[exercises]]
  id = 73
  exercise = "У меня идет процесс и мне нужно получить сигнал от другого потока в течении определенного времени. Какой класс использовать или механизм?"

[[exercises]]
  id = 74
  exercise = "Есть функция вычисляющая новое значение на основе предыдущего. Выполнение функции требует больших ресурсов. Вызывается из многопоточного окружения. Что лучше использовать атомарные типы или блоки синхронизации?"
