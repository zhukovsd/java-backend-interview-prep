#### 20. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –≤—Å–µ—Ö –∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤


**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå **–ù–∞–ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω SQL-–∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤–µ—Ä–Ω—ë—Ç N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `news` –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ –∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `comments`.**  

- –¢–∞–±–ª–∏—Ü–∞ `news` –∏–º–µ–µ—Ç –ø–æ–ª—è: `id` (integer auto_increment).  
- –¢–∞–±–ª–∏—Ü–∞ `comments` –∏–º–µ–µ—Ç –ø–æ–ª—è: `id` (integer auto_increment), `news_id` (integer).  

{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
üí° –ú–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –Ω–æ–≤–æ—Å—Ç–µ–π, –∞ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å LEFT JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π `comments` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º.  
üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CTE (Common Table Expression) –¥–ª—è –æ—Ç–±–æ—Ä–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ –Ω–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```sql
-- –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞ —Å LEFT JOIN
SELECT n.*, c.*
FROM (
    SELECT *
    FROM news
    ORDER BY id DESC
    LIMIT N  -- –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π
) n
LEFT JOIN comments c ON n.id = c.news_id;

-- –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CTE (Common Table Expression)
WITH latest_news AS (
    SELECT *
    FROM news
    ORDER BY id DESC
    LIMIT N  -- –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π
)
SELECT ln.*, c.*
FROM latest_news ln
LEFT JOIN comments c ON ln.id = c.news_id;
````

‚úÖ **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- **–†–µ—à–µ–Ω–∏–µ 1:**
    
    - –ü–æ–¥–∑–∞–ø—Ä–æ—Å `n` –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∑–∞–ø–∏—Å–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `news`, —Å–æ—Ä—Ç–∏—Ä—É—è –∏—Ö –ø–æ —É–±—ã–≤–∞–Ω–∏—é `id`.
        
    - LEFT JOIN —Å —Ç–∞–±–ª–∏—Ü–µ–π `comments` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ—Å—Ç–∏.
        
- **–†–µ—à–µ–Ω–∏–µ 2:**
    
    - CTE `latest_news` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N –Ω–æ–≤–æ—Å—Ç–µ–π.
        
    - –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ –ø–æ–ª—é `news_id`, —Å–≤—è–∑—ã–≤–∞—è –∏—Ö —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∏–∑ CTE.
        

üî• –û–±–∞ —Ä–µ—à–µ–Ω–∏—è –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä—É—è –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏! {{< /details >}}