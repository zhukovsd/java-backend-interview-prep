#### 18. –¢–æ–ø-10 —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤, –ø–æ–ª—É—á–∏–≤—à–∏—Ö –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ SMS

**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå **–ù–∞–ø–∏—Å–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (`phone`), –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏–ª–∏ –±–æ–ª–µ–µ –æ–¥–Ω–æ–π SMS.**

- –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ **—Ç–æ–ø-10** –Ω–æ–º–µ—Ä–æ–≤ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö SMS.

```sql
table: sms
id   | phone      | message
1    | 9876552222 | some message
2    | 9876552222 | some message
3    | 9876552234 | another message

```


{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é** ¬†
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
üí° –ò—Å–ø–æ–ª—å–∑—É–π `GROUP BY`, —á—Ç–æ–±—ã —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ `phone`.  
üí° `HAVING COUNT(*) > 1` –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –Ω–æ–º–µ—Ä–∞, —É –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª–µ–µ –æ–¥–Ω–æ–π SMS.  
üí° `ORDER BY COUNT(*) DESC` –æ–±–µ—Å–ø–µ—á–∏—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫ –º–µ–Ω—å—à–µ–º—É.  
üí° `LIMIT 10` –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10 –Ω–æ–º–µ—Ä–æ–≤.
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```sql
SELECT phone, COUNT(*) AS sms_count
FROM sms
GROUP BY phone
HAVING COUNT(*) > 1
ORDER BY sms_count DESC
LIMIT 10;
```

‚úÖ **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- **`GROUP BY phone`** ‚Äì –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –∑–∞–ø–∏—Å–∏ –ø–æ –Ω–æ–º–µ—Ä–∞–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤.
- **`COUNT(*) AS sms_count`** ‚Äì —Å—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–º–µ—Ä–∞.
- **`HAVING COUNT(*) > 1`** ‚Äì —Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –Ω–æ–º–µ—Ä–∞, —É –∫–æ—Ç–æ—Ä—ã—Ö –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π SMS.
- **`ORDER BY sms_count DESC`** ‚Äì —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.
- **`LIMIT 10`** ‚Äì –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ 10 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π.

üî• –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ —Ç–æ–ø-10 –Ω–æ–º–µ—Ä–æ–≤, –ø–æ–ª—É—á–∏–≤—à–∏—Ö –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ SMS! üì≤üöÄ
{{< /details >}}