#### 20. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤


**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå **–ù–∞–ø–∏—Å–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö `id` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`, —É –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–∫–∞–∑—ã –≤ —Ç–∞–±–ª–∏—Ü–µ `orders`.**  

- –¢–∞–±–ª–∏—Ü–∞ `users` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `id`.  
- –¢–∞–±–ª–∏—Ü–∞ `orders` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—è `userId` –∏ `orderId`.  
- –ó–∞–¥–∞—á–∞ ‚Äî –Ω–∞–π—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ `orders`.

{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
üí° –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `LEFT JOIN` –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ NULL.  
üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏–µ `NOT EXISTS` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∑–∞–∫–∞–∑–∞–º–∏.  
üí° –û–±–∞ –ø–æ–¥—Ö–æ–¥–∞ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `orders`.
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```sql
-- –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LEFT JOIN
SELECT u.id
FROM users u
LEFT JOIN orders o ON u.id = o.userId
WHERE o.userId IS NULL;

-- –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NOT EXISTS
SELECT u.id
FROM users u
WHERE NOT EXISTS (
    SELECT 1 
    FROM orders o 
    WHERE o.userId = u.id
);
````

‚úÖ **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- **–†–µ—à–µ–Ω–∏–µ 1:**  
    –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç LEFT JOIN —Ç–∞–±–ª–∏—Ü—ã `users` —Å —Ç–∞–±–ª–∏—Ü–µ–π `orders`. –ï—Å–ª–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏, –∑–Ω–∞—á–µ–Ω–∏–µ `o.userId` –±—É–¥–µ—Ç NULL, —á—Ç–æ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —É—Å–ª–æ–≤–∏–∏ WHERE –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ —Ç–∞–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
    
- **–†–µ—à–µ–Ω–∏–µ 2:**  
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å —Å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π `NOT EXISTS`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `orders` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users`.
    

üî• –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤! {{< /details >}}