#### 21. –í—ã–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤–æ—Å—Ç–µ–π —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö


**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `news` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `comments`, –¥–∞–∂–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö.**  

- –¢–∞–±–ª–∏—Ü–∞ `news` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤–æ—Å—Ç–∏ (`id` ‚Äî –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç).  
- –¢–∞–±–ª–∏—Ü–∞ `comments` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (`news_id` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ `news.id`).  
- –î–æ–ø—É—Å—Ç–∏–º, –¥–∞–Ω–Ω—ã—Ö **–æ—á–µ–Ω—å –º–Ω–æ–≥–æ**, –≤–∞–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏.

{{< hint warning >}}
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}
üí° –ò—Å–ø–æ–ª—å–∑—É–π **–ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—É—é –≤—ã–±–æ—Ä–∫—É (pagination)**, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–∞—Å—Ç—è–º–∏.  
üí° –í–∞–∂–Ω–æ –¥–µ–ª–∞—Ç—å **LEFT JOIN**, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.  
üí° –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–ø–æ—Ç–æ–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** –∏–ª–∏ **batch-–∑–∞–≥—Ä—É–∑–∫—É** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–æ–¥–∞.  
üí° –í PostgreSQL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FETCH NEXT`, –≤ MySQL ‚Äî `LIMIT` –∏ `OFFSET`.
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```sql
-- –ü—Ä–∏–º–µ—Ä –±–∞–∑–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å LEFT JOIN
SELECT n.*, c.*
FROM news n
LEFT JOIN comments c ON n.id = c.news_id;
````

‚úÖ **–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≥—Ä—É–∑–∫—É —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö:**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É:**
    

```sql
-- –ü—Ä–∏–º–µ—Ä —Å LIMIT –∏ OFFSET
SELECT n.*, c.*
FROM news n
LEFT JOIN comments c ON n.id = c.news_id
ORDER BY n.id
LIMIT 1000 OFFSET 0; -- –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ OFFSET –±—É–¥–µ—Ç 1000, –∑–∞—Ç–µ–º 2000 –∏ —Ç.–¥.
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–æ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, JDBC –∏–ª–∏ ORM):**
    

```java
PreparedStatement stmt = connection.prepareStatement(
    "SELECT n.*, c.* FROM news n LEFT JOIN comments c ON n.id = c.news_id ORDER BY n.id",
    ResultSet.TYPE_FORWARD_ONLY,
    ResultSet.CONCUR_READ_ONLY
);
stmt.setFetchSize(1000);
ResultSet rs = stmt.executeQuery();
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã–≥—Ä—É–∑–∫—É –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É `id` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WHERE n.id BETWEEN ...`), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å OFFSET.**
    

```sql
SELECT n.*, c.*
FROM news n
LEFT JOIN comments c ON n.id = c.news_id
WHERE n.id BETWEEN 10001 AND 11000
ORDER BY n.id;
```

üî• –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –¥–∞–∂–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç—Ä–æ–∫ –º–æ–∂–Ω–æ **–≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏**, –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—è —Å–∏—Å—Ç–µ–º—É. {{< /details >}}