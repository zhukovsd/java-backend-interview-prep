#### 36. –ü–∞–ø–∫–∏ —Å AVI-—Ñ–∞–π–ª–∞–º–∏ –∏ –ø—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏


**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå –ù–∞–ø–∏—Å–∞—Ç—å SQL-–∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–±—Ä–∞–ª –±—ã **–Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞–ø–æ–∫**, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.avi`, **–∏–ª–∏** –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è **–ø—É—Å—Ç—ã–º–∏** (–Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞).

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:**

```sql
CREATE TABLE folder (
  id uuid PRIMARY KEY,
  name text NOT NULL
);

CREATE TABLE file (
  id uuid PRIMARY KEY,
  name text NOT NULL,
  folder_id uuid NOT NULL,
  CONSTRAINT fk__file__folder_id FOREIGN KEY (folder_id) REFERENCES folder (id)
);

```

{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –ò—Å–ø–æ–ª—å–∑—É–µ–º `LEFT JOIN` ‚Äî —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏ —Ç–µ –ø–∞–ø–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö **–Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –≤–æ–æ–±—â–µ**.  
üí° –î–ª—è —Ñ–∞–π–ª–æ–≤ —Å `.avi` –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–ª—å—Ç—Ä `file.name LIKE '%.avi'`.  
üí° –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ–º `file.id IS NULL`.  
üí° –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DISTINCT`, –µ—Å–ª–∏ JOIN –º–æ–∂–µ—Ç –¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã.  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}
```sql
SELECT DISTINCT f.name
FROM folder f
LEFT JOIN file fi ON f.id = fi.folder_id
WHERE fi.name LIKE '%.avi'
   OR fi.id IS NULL;
```

‚úÖ **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è:**

- `LEFT JOIN` —Å–æ–µ–¥–∏–Ω—è–µ—Ç –ø–∞–ø–∫–∏ —Å —Ñ–∞–π–ª–∞–º–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å), –æ—Å—Ç–∞–≤–ª—è—è —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –ø—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫.
    
- `fi.name LIKE '%.avi'` ‚Äî –≤—ã–±–∏—Ä–∞–µ–º –ø–∞–ø–∫–∏ —Å AVI-—Ñ–∞–π–ª–∞–º–∏.
    
- `fi.id IS NULL` ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –ø–∞–ø–∫–µ –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
    
- `DISTINCT` —É–±–∏—Ä–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã, –µ—Å–ª–∏ –≤ –ø–∞–ø–∫–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ AVI-—Ñ–∞–π–ª–æ–≤.
    

üî• –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å ‚Äî –∏ —É –Ω–∞—Å –∏ –≤–∏–¥–µ–æ, –∏ –ø—É—Å—Ç–æ—Ç–∞ üòé  
{{< /details >}}