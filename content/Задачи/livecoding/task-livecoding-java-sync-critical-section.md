#### 80. Code Review: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–∫—Ü–∏–∏ –≤ –¥–≤—É—Ö –ø–æ—Ç–æ–∫–∞—Ö

üî• –í —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π `Object` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `doSome()`, –ø–æ—ç—Ç–æ–º—É –ø–æ—Ç–æ–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω–∞ **—Ä–∞–∑–Ω—ã—Ö** –º–æ–Ω–∏—Ç–æ—Ä–∞—Ö ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∑–∞—â–∏—â–µ–Ω–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã–∑–æ–≤ `new Service.doSome()` –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –ø–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É, –∞ `main` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `static`.

```java
class Main{
void main(){
    execute(()->new Service.doSome());
    execute(()->new Service.doSome());
}
}

class Service{
    void doSome(){
        Object obj = new Object();
        //code
        synchronized(obj){
            //code
        }
        //code
    }
}
```

---

{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –ù–µ —Å–æ–∑–¥–∞–≤–∞–π –º–æ–Ω–∏—Ç–æ—Ä –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ ‚Äî –æ–Ω –±—É–¥–µ—Ç —Ä–∞–∑–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞. –î–µ—Ä–∂–∏ –æ–±—â–∏–π `lock` –≤ –ø–æ–ª–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π `synchronized` –Ω–∞ `this`).  
üí° –ó–∞–ø—É—Å–∫–∞–π –æ–±–∞ –ø–æ—Ç–æ–∫–∞ –Ω–∞ **–æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ** —ç–∫–∑–µ–º–ø–ª—è—Ä–µ `Service`, –∏–Ω–∞—á–µ –±—É–¥—É—Ç —Ä–∞–∑–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä—ã.  
üí° –ò—Å–ø—Ä–∞–≤—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É `main` –Ω–∞ `public static void main(String[] args)` –∏ –≤—ã–∑–æ–≤—ã –ª—è–º–±–¥ (`service::doSome`).  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Å synchronized-–º–µ—Ç–æ–¥–æ–º)" close >}}

```java
class Main {
    public static void main(String[] args) {
        Service service = new Service();
        execute(service::doSome);
        execute(service::doSome);
    }

    static void execute(Runnable r) {
        new Thread(r).start();
    }
}

class Service {
    void doSome() {
        // code
        critical(); // –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è –≤—ã–∑–æ–≤–æ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞
        // code
    }

    private synchronized void critical() {
        // code (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–∫—Ü–∏—è)
    }
}
```

- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ `this` —á–µ—Ä–µ–∑ `synchronized`-–º–µ—Ç–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ.  
  {{< /details >}}