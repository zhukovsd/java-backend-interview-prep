#### 7. –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö

**–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏:**  
üìå –î–∞–Ω–∞ –∫–∞—Ä—Ç–∞ —Å–∫–ª–∞–¥–æ–≤ `Map<String, List<String>> storage`, –≥–¥–µ –∫–ª—é—á ‚Äî –∏–º—è —Å–∫–ª–∞–¥–∞, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤/–Ω–æ–º–µ—Ä–æ–≤.  
–ù—É–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é **Stream API** –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** (–Ω–æ–º–µ—Ä–∞), –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.

**–ö–æ–¥:**

```java
Map<String, List<String>> storage = new HashMap<>();
storage.put("s1", Arrays.asList("555-1123", "555-3389"));
storage.put("s2", Arrays.asList("555-1123", "555-5264"));
storage.put("s3", Arrays.asList("555-6654", "555-3242"));
```

{{< hint warning >}}  
**–°–ø–æ–π–ª–µ—Ä—ã –∫ —Ä–µ—à–µ–Ω–∏—é**  
{{< /hint >}}

{{< details "–ü–æ–¥—Å–∫–∞–∑–∫–∏" close >}}  
üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `values()` —É `Map`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤.  
üí° –ü—Ä–∏–º–µ–Ω–∏—Ç–µ `flatMap(...)`, —á—Ç–æ–±—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å `List<List<String>>` –≤ `Stream<String>`.  
üí° –ú–µ—Ç–æ–¥ `distinct()` –æ—Å—Ç–∞–≤–∏—Ç —Ç–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.  
üí° –ò—Ç–æ–≥ –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –≤ `Set` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ `forEach(System.out::println)`.  
{{< /details >}}

{{< details "–†–µ—à–µ–Ω–∏–µ" close >}}

```java
storage.values().stream()            // Stream<List<String>>
    .flatMap(List::stream)           // Stream<String>
    .distinct()                      // —É–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
    .forEach(System.out::println);   // –≤—ã–≤–æ–¥–∏–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```

**–í—ã–≤–æ–¥:**

```
555-1123
555-3389
555-5264
555-6654
555-3242
```

üß† **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**

- `flatMap(List::stream)` —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ —Å–ø–∏—Å–∫–∏ –∏–∑ `Map` –≤ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ —Å—Ç—Ä–æ–∫.

- `distinct()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã.

- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî —Å–æ–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ:


```java
Set<String> uniqueNumbers = storage.values().stream()
    .flatMap(Collection::stream)
    .collect(Collectors.toSet());
```

{{< /details >}}