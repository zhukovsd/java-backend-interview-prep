+++
title = 'Базы данных'
weight = 1
bookFlatSection = true
+++

## Базы данных

#### 1. Виды БД и для чего их лучше использовать?
  1. Реляционные БД
  2. Документоориентированные базы данных
  3. Графовые базы данных
  4. Ключ-значение базы данных
  5. Колонноориентированные базы данных
  6. Временные базы данных (Time-Series)
  7. Объектно-ориентированные базы данных
  8. NewSQL

**Таблица сравнений**

|Вид БД|Примеры|Основное применение|
|---|---|---|
|Реляционные|MySQL, PostgreSQL|Финансы, CRM, интернет-магазины|
|Документоориентированные|MongoDB, CouchDB|Гибкие структуры данных, профили пользователей|
|Графовые|Neo4j, OrientDB|Анализ связей, социальные сети|
|Ключ-значение|Redis, DynamoDB|Кэширование, сессии|
|Колонноориентированные|Cassandra, HBase|Аналитика, большие данные|
|Временные|InfluxDB, TimescaleDB|Метрики, IoT|
|Объектно-ориентированные|ObjectDB|CAD, моделирование|
|NewSQL|CockroachDB|Масштабируемость, транзакции|


---
#### 2. Масштабирование. Как решить нехватку места на сервере?

|Тип масштабирования|Описание|Решение проблемы нехватки места|
|---|---|---|
|Вертикальное (Scaling Up)|Увеличение ресурсов текущего сервера: больше процессоров, памяти, дисков.|Установка новых дисков, увеличение объема оперативной памяти, переход на более мощный сервер.|
|Горизонтальное (Scaling Out)|Добавление дополнительных серверов, которые работают совместно.|Разделение базы данных между несколькими серверами с использованием шардинга или кластеризации.|
|Архивирование данных|Перемещение редко используемых данных в архив.|Снижение нагрузки и экономия места за счет переноса устаревших данных в отдельное хранилище.|
|Использование облаков|Хранение данных в облачных системах, таких как AWS, Azure, GCP.|Масштабируемое хранилище с оплатой за используемый объем.|
|Репликация данных|Создание копий базы данных на других серверах для распределения нагрузки.|Разгрузка основного сервера за счет распределения запросов на чтение.|

---
#### 3. Репликация базы данных. Что это такое?

Репликация — это процесс создания и поддержания копий базы данных на нескольких серверах.  
Она используется для обеспечения отказоустойчивости, увеличения производительности и масштабируемости.

 **Типы репликации:**

1. **Синхронная репликация**:
    - Данные копируются на реплику сразу после внесения изменений.
    - Высокая консистентность, но может снижать производительность.
2. **Асинхронная репликация**:
    - Данные копируются с задержкой.
    - Более производительная, но возможна временная несогласованность данных.

 **Преимущества:**

- Увеличение отказоустойчивости.
- Балансировка нагрузки (например, чтение может выполняться с реплики).
- Географическое распределение данных для улучшения задержек.

 **Пример использования репликации:**

- **Master-Slave**: Один главный сервер (`master`) обрабатывает запись, а копии (`slave`) отвечают за чтение.
- **Master-Master**: Все узлы могут записывать и читать, требуется механизм разрешения конфликтов.

---
#### 4. Что такое шардирование?
*Шардирование* — это метод горизонтального масштабирования базы данных, при котором данные делятся на части (шарды) и распределяются между несколькими серверами. Каждый шард содержит только часть общего набора данных и работает как отдельная база данных.

---
***Как работает шардирование?***

1. Данные разбиваются по определённому ключу (например, идентификатор пользователя, географический регион).
2. Каждая часть (шард) хранится на отдельном сервере или экземпляре базы данных.
3. При запросе система определяет, на каком шарде находятся нужные данные, и обращается к нему.

---
***Зачем нужно шардирование?***

- **Масштабируемость:** Увеличение объёма данных обрабатывается добавлением новых серверов.
- **Производительность:** Запросы выполняются быстрее, так как каждый сервер обрабатывает только часть данных.
- **Изоляция:** Ошибка на одном шарде не влияет на другие.

---
***Плюсы шардирования***

- Возможность обработки больших объёмов данных.
- Уменьшение нагрузки на каждый отдельный сервер.
- Горизонтальное масштабирование, которое дешевле, чем вертикальное.

***Минусы шардирования***

- **Сложность реализации:** Требуется правильное распределение данных между шардами.
- **Обслуживание:** Управление несколькими серверами сложнее.
- **Перераспределение данных:** Если количество серверов изменяется, данные нужно перераспределить.

---
#### 5. NoSQL vs SQL
- *SQL* (реляционные базы данных): Структурированные таблицы с чёткой схемой данных.
- *NoSQL* (нереляционные базы данных): Гибкая структура для неструктурированных или полуструктурированных данных.

**Таблица сравнения**

|**Критерий**|**SQL (реляционные)**|**NoSQL (нереляционные)**|
|---|---|---|
|**Структура данных**|Таблицы (строки и столбцы).|Документы, ключ-значение, графы, колонки.|
|**Схема**|Жёсткая, требуется заранее определить.|Гибкая, можно изменять структуру данных.|
|**Язык запросов**|SQL (стандартный язык запросов).|API или специальные запросы (например, MongoDB Query).|
|**Масштабируемость**|Вертикальная (добавление ресурсов серверу).|Горизонтальная (добавление серверов).|
|**Целостность данных**|Высокая (ACID-транзакции).|Может быть слабее, иногда поддерживается BASE.|
|**Скорость**|Оптимизировано для сложных операций и JOIN.|Высокая скорость для простых операций.|
|**Когда использовать**|Структурированные данные, сложные связи.|Гибкие, быстро меняющиеся данные.|
|**Примеры**|MySQL, PostgreSQL, Oracle.|MongoDB, Redis, Cassandra, Neo4j.|

